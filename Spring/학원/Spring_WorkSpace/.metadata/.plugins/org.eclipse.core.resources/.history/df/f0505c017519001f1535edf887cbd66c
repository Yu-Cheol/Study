<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="AdminGongji"> <!-- 관리자 공지사항 -->

  <!-- 검색전후 레코드 개수 -->
  <select id="ag_count" parameterType="page" resultType="int">
      select count(gongji_no) from gongji
      <where>
        <if test="find_field == ''"></if> <!-- 전체 게시물수 -->
        <if test="find_field == 'gongji_title'"> <!-- 공지제목으로 검색할 때 -->
          gongji_title like #{find_name}
        </if>
        <if test="find_field == 'gongji_cont'"> <!-- 공지내용으로 검색할 때 -->
          gongji_cont like #{find_name}        
        </if>
      </where>
   </select>
   
   <!-- 관리자 공지사항 검색전후 목록 -->
   <select id="ag_list" parameterType="page" resultType="gongji">
     select * from (select rowNum rNum, gongji_no, gongji_name, gongji_title, gongji_hit,
       ,gongji_date from 
      (select * from gongji
      <where>
        <if test="find_field == ''"></if> <!-- 전체 게시물수 -->
        <if test="find_field == 'gongji_title'"> <!-- 공지제목으로 검색할 때 -->
          gongji_title like #{find_name}
        </if>
        <if test="find_field == 'gongji_cont'"> <!-- 공지내용으로 검색할 때 -->
          gongji_cont like #{find_name}        
        </if>
      </where>
      order by gongji asc))
      where rNum &gt;= #{startrow} and rNum &lt;= #{endrow}
      <!-- &gt;은 >, &lt;은 < -->
   </select>
      
</mapper>












