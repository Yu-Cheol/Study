<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board"> <!-- 매퍼네임스페이스명을 Board 로 지정 -->

 <!-- 게시판 저장 -->
 <insert id="board_in" parameterType="board">
  <!-- parameterType 속성은 전달인자 타입이고 생략가능함. board는 mybatis-config.xml
  에서 설정한 BoardVO 빈클래스 객체 별칭이름이다. -->
  insert into tbl_board (bno,writer,title,content) 
  values(bno_seq.nextval, #{writer}, #{title}, #{content})
  <!-- #{title}를 자바코드로 표현하면 board.getTitle();과 같은 기능을 한다. -->
 </insert>
 
 <!-- 총레코드 개수 -->
 <select id="b_count" resultType="int">
  <!-- resultType은 반환타입 속성이고 생략 불가능. -->
  select count(*) from tbl_board
  <!-- count()함수는 총레코드 개수를 구한다.  -->
 </select>
 
 <!-- 페이징 목록 -->
 <select id="b_list" parameterType="net.daum.vo.BoardVO" 
 resultType="board">
   select * from
   (select rowNum rNum,bno,writer,title,viewcnt,regdate,replycnt 
   from 
   (select * from tbl_board order by bno desc))
   where rNum &gt;= #{startrow} and rNum &lt;= #{endrow}
   <!-- rowNum컬럼은 오라클에서 테이블 생성시 추가되는 컬럼으로 최초 레코드 저장시 정수숫자
   일련번호값이 들어간다. rNum은 rowNum컬럼 별칭이름이다. &gt; 은 >, &lt; 은 < --> 
 </select>
 
 <!-- 조회수 증가 -->
 <update id="b_hit" parameterType="int">
   update tbl_board set viewcnt=viewcnt+1 where bno=#{bno}
 </update>
 
 <!-- 번호에 해당하는 레코드값 가져오기 -->
 <select id="b_cont" parameterType="int" resultType="net.daum.vo.BoardVO">
   select * from tbl_board where bno=#{bno}
 </select>
 
 <!-- 수정 -->
 <update id="b_edit"> <!-- parameterType은 생략함. -->
   update tbl_board set writer=#{writer},title=#{title},content=#{content}
   where bno=#{bno}
 </update>
 
 <!-- 삭제 -->
 <delete id="b_del">
   delete from tbl_board where bno=#{bno}
 </delete>
 
 <!-- 댓글 수 카운터(댓글수 증가/감소) -->
 <update id="updateReplyCnt" parameterType="java.util.Map">
    update tbl_board set replycnt = replycnt + #{count}
    where bno = #{bno}
 </update>
 
</mapper>









