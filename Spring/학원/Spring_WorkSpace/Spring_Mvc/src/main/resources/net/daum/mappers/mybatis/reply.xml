<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Reply">

  <!-- 댓글 저장 -->
  <insert id="reply_in" > <!-- parameterType은 생략가능 -->
    insert into tbl_reply (rno,bno,replyer,replytext,regdate)
    values(rno_seq.nextval, #{bno},#{replyer},#{replytext},sysdate)
  </insert>
  
  <!-- 게시판 번호에 해당하는 댓글 목록 -->
  <select id="reply_list" parameterType="int" resultType="reply">
    select * from tbl_reply where bno=#{bno} order by rno desc
  </select>
  
  <!-- 댓글 수정 -->
  <update id="reply_edit">
    update tbl_reply set replytext=#{replytext},updatedate=sysdate
    where rno=#{rno}
  </update>  
  
  <!-- 댓글 삭제 -->
  <delete id="reply_del" parameterType="int">
    delete tbl_reply where rno=#{no}
    <!-- from절문은 생략 가능함 -->
  </delete>
  
  <!-- 댓글 번호를 기준으로 게시판 번호값 구하기 -->
  <select id="reply_bno" parameterType="int" resultType="int">
    select bno from tbl_reply where rno=#{rno}
  </select>
</mapper>








